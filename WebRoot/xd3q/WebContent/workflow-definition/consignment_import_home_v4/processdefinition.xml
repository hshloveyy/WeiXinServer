<?xml version="1.0" encoding="UTF-8"?>

<process-definition  xmlns=""  name="consignment_import_home_v4">


	<start-state name="内贸发货申请">
		<transition to="部门经理确认" name="提交部门经理确认"></transition>
	</start-state>


	<task-node name="财务审核">
	    <task name="财务审核"></task>
		<transition to="综合部经理确认" name="同意发货"></transition>
		<transition to="修改发货申请信息" name="退回业务修改"></transition>
		<transition to="确定是否继续申请" name="不同意发货，退回业务"></transition>
	</task-node>

	<task-node name="确定是否继续申请">
	    <task name="确定是否继续申请"></task>
	    <transition to="金属事业部经理审批" name="提交金属事业部经理审批（特批）"></transition>
		<transition to="更新出仓单状态为不通过" name="放弃发货申请"></transition>
	</task-node>

	<task-node name="部门经理确认">
	    <task name="部门经理确认"></task>
		<transition to="财务审核" name="确认提交"></transition>
		<transition to="修改发货申请信息" name="退回修改"></transition>
	</task-node>

	<task-node name="修改发货申请信息">
	    <task name="修改发货申请信息"></task>
		<transition to="部门经理确认" name="提交部门经理"></transition>
	</task-node>

	<task-node name="综合部经理确认">
	    <task name="综合部经理确认"></task>
		<transition to="综合部仓管员确认" name="同意发货"></transition>
		<transition to="修改发货申请信息" name="单据不符，退回业务修改"></transition>
	</task-node>

	<task-node name="股份公司副总审批">
	    <task name="股份公司副总审批"></task>
		<transition to="股份公司常务副总审批" name="提交股份公司常务副总审批"></transition>
		<transition to="更新出仓单状态为不通过" name="不同意发货"></transition>
	</task-node>

	<task-node name="股份公司常务副总审批">
	    <task name="股份公司常务副总审批"></task>
		<transition to="金额判断" name="同意发货"></transition>
		<transition to="更新出仓单状态为不通过" name="不同意发货"></transition>
	</task-node>

	<decision name="金额判断">
		<handler class="com.infolion.sapss.workflow.ship.Price1JudgeDecisionHandler" config-type="bean"></handler>
		<transition to="综合部经理确认" name="金额小于100万美金"></transition>
		<transition to="股份公司总经理审批" name="金额大于100万美金"></transition>
	</decision>

	<decision name="金额判断1">
		<handler config-type="bean" class="com.infolion.sapss.workflow.ship.Price2JudgeDecisionHandler"></handler>
		<transition to="综合部经理确认" name="金额小于200万美金"></transition>
		<transition to="股份公司董事长审批" name="金额大于200万美金"></transition>
	</decision>

	<task-node name="股份公司总经理审批">
	    <task name="股份公司总经理审批"></task>
		<transition to="金额判断1" name="同意发货"></transition>
		<transition to="更新出仓单状态为不通过" name="不同意发货"></transition>
	</task-node>

	<task-node name="股份公司董事长审批">
	    <task name="股份公司董事长审批"></task>
		<transition to="综合部经理确认" name="同意发货"></transition>
		<transition to="更新出仓单状态为不通过" name="不同意发货"></transition>
	</task-node>

	<node name="更新出仓单状态为不通过">
		<action class="com.infolion.sapss.workflow.ship.ConsgmtImportFaileActionHandler" config-type="bean"></action>
		<transition to="发货申请不通过"></transition>
	</node>

	<node name="更新出仓单状态为通过">
		<action class="com.infolion.sapss.workflow.ship.ConsgmtImportSucessfulActionHandler" config-type="bean"></action>
		<transition to="发货申请通过"></transition>
	</node>

	<task-node name="综合部仓管员确认">
	    <task name="综合部仓管员确认"></task>
		<transition to="更新出仓单状态为通过" name="已在SAP系统做相关出库操作"></transition>
		<transition to="修改发货申请信息" name="退回修改"></transition>
	</task-node>

	<task-node name="金属事业部经理审批">
	    <task name="金属事业部经理审批"></task>
		<transition to="外贸综合一部经理审批" name="提交综合一部经理审核"></transition>
		<transition to="更新出仓单状态为不通过" name="不同意发货"></transition>
	</task-node>

	<task-node name="外贸综合一部经理审批">
	    <task name="外贸综合一部经理审批"></task>
		<transition to="股份公司副总审批" name="同意"></transition>
		<transition to="更新出仓单状态为不通过" name="不同意发货"></transition>
	</task-node>


	<end-state name="发货申请不通过"></end-state>

	<end-state name="发货申请通过"></end-state>


</process-definition>