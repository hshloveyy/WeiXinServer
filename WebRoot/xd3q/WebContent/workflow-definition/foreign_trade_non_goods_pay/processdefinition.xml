<?xml version="1.0" encoding="UTF-8"?>

<process-definition  xmlns=""  name="foreign_trade_non_goods_pay">


	<start-state name="外贸非货款申请">
		<transition to="是否职能部门" name="提交部门经理"></transition>
	</start-state>


	<task-node name="部门经理审核">
	    <task name="部门经理审核"></task>
		<transition to="关联交易判断" name="确认提交"></transition>
		<transition to="修改" name="退回修改"></transition>
	</task-node>

	<task-node name="财务会计审核">
	    <task name="财务会计审核"></task>
		<transition to="财务经理审核" name="提交财务经理审核"></transition>
		<transition to="修改" name="退回修改"></transition>
	</task-node>

	<task-node name="财务经理审核">
	    <task name="财务经理审核"></task>
		<transition to="是否职能部门2" name="同意"></transition>
		<transition to="是否职能部门1" name="退回修改"></transition>
	</task-node>

	<task-node name="股份公司常务副总审批">
	    <task name="股份公司常务副总审批"></task>
		<transition to="是否期货保证金2" name="同意付款"></transition>
		<transition to="是否职能部门1" name="退回修改"></transition>
		<transition to="更新状态为不通过" name="不同意付款"></transition>
	</task-node>

	<decision name="是否期货保证金">
		<handler config-type="bean" class="com.infolion.sapss.workflow.payment.FuturesMarginDecisionHandler"></handler>
		<transition to="贸易发展部审核" name="是"></transition>
		<transition to="股份公司常务副总审批" name="否"></transition>
	</decision>

	<task-node name="股份副总兼外贸公司总经理审批">
	    <task name="股份副总兼外贸公司总经理审批"></task>
		<transition to="股份公司常务副总审批" name="同意"></transition>
		<transition to="修改" name="退回修改"></transition>
		<transition to="更新状态为不通过" name="不同意付款"></transition>
	</task-node>

	<task-node name="股份公司总经理审批">
	    <task name="股份公司总经理审批"></task>
		<transition to="是否超过100万CNY" name="同意付款"></transition>
		<transition to="修改" name="退回修改"></transition>
		<transition to="更新状态为不通过" name="不同意付款"></transition>
	</task-node>

	<task-node name="网银授权人员审核">
	    <task name="网银授权人员审核"></task>
		<transition to="更新状态" name="已付款"></transition>
	</task-node>

	<task-node name="出纳审核">
	    <task name="出纳审核"></task>
		<transition to="是否网上支付税款" name="确认">
			<action config-type="bean" class="com.infolion.sapss.workflow.payment.CreditPayTellerCheckActionHandler"></action>
		</transition>
	</task-node>

	<node name="更新状态">
		<action class="com.infolion.sapss.workflow.payment.ProcessSuccessActionHandler"></action>
		<transition to="审批通过"></transition>
	</node>

	<task-node name="修改">
	    <task name="修改"></task>
		<transition to="部门经理审核" name="提交部门经理"></transition>
		<transition to="更新状态为不通过" name="取消该申请"></transition>
	</task-node>

	<node name="更新状态为不通过">
		<action class="com.infolion.sapss.workflow.payment.ProcessFailureActionHandler"></action>
		<transition to="结束（不通过）"></transition>
	</node>

	<task-node name="贸易发展部审核">
	    <task name="贸易发展部审核"></task>
		<transition to="股份副总兼外贸公司总经理审批" name="确认"></transition>
		<transition to="修改" name="退回修改"></transition>
	</task-node>

	<decision name="是否期货保证金1">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.FuturesMarginDecisionHandler"></handler>
		<transition to="财务会计审核" name="是"></transition>
		<transition to="财务会计审核" name="否"></transition>
	</decision>

	<task-node name="职能部门经理确认">
	    <task name="职能部门经理确认"></task>
		<transition to="财务经理审核" name="提交外贸财务经理审核"></transition>
		<transition to="职能部门修改" name="退回修改"></transition>
	</task-node>

	<decision name="是否职能部门">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.DeptIsFunDecisionHandler"></handler>
		<transition to="部门经理审核" name="否"></transition>
		<transition to="职能部门经理确认" name="是"></transition>
	</decision>

	<decision name="是否职能部门1">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.DeptIsFunDecisionHandler"></handler>
		<transition to="修改" name="否"></transition>
		<transition to="职能部门修改" name="是"></transition>
	</decision>

	<task-node name="职能部门修改">
	    <task name="职能部门修改"></task>
		<transition to="职能部门经理确认" name="提交部门经理"></transition>
		<transition to="更新状态为不通过" name="作废申请"></transition>
	</task-node>

	<decision name="特殊帐号处理">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.SpecialAccountDecisionHandler"></handler>
		<transition to="出纳审核" name="正常帐号"></transition>
		<transition to="上海信达诺财务付款" name="上海信达诺帐号"></transition>
	</decision>

	<task-node name="上海信达诺财务付款">
	    <task name="上海信达诺财务付款"></task>
		<transition to="更新状态" name="已付款"></transition>
	</task-node>

	<decision name="是否超过100万CNY">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.Over100WDecisionHandler"></handler>
		<transition to="特殊帐号处理" name="否"></transition>
		<transition to="资金部经理确认（超过100万）" name="是"></transition>
	</decision>

	<task-node name="资金部经理确认（超过100万）">
	    <task name="资金部经理确认（超过100万）"></task>
		<transition to="特殊帐号处理" name="确认"></transition>
		<transition to="出纳审核B岗" name="提交出纳审核（B岗）"></transition>
	</task-node>

	<decision name="是否网上支付税款">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.IsNetPayDecisionHandler"></handler>
		<transition to="支付税款" name="是"></transition>
		<transition to="网银授权人员审核" name="否"></transition>
	</decision>

	<task-node name="支付税款">
	    <task name="支付税款"></task>
		<transition to="更新状态" name="确认，已支付"></transition>
	</task-node>

	<task-node name="出纳审核B岗">
	    <task name="出纳审核B岗"></task>
		<transition to="是否网上支付税款" name="确认"></transition>
		<transition to="资金部经理确认（超过100万）" name="退回资金部经理"></transition>
	</task-node>

	<decision name="关联交易判断">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.IsRelation1DecisionHandler"></handler>
		<transition to="证券事业部审核" name="关联交易"></transition>
		<transition to="财务会计审核" name="非关联交易"></transition>
	</decision>

	<task-node name="证券事业部审核">
	    <task name="证券事业部审核"></task>
		<transition to="财务会计审核" name="确认"></transition>
		<transition to="修改" name="退回修改"></transition>
	</task-node>

	<decision name="是否职能部门2">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.DeptIsFunDecisionHandler"></handler>
		<transition to="分管领导审核" name="否"></transition>
		<transition to="是否期货保证金" name="是"></transition>
	</decision>

	<task-node name="分管领导审核">
	    <task name="分管领导审核"></task>
		<transition to="是否期货保证金" name="同意"></transition>
		<transition to="修改" name="退回修改"></transition>
	</task-node>

	<decision name="是否期货保证金2">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.FuturesMarginDecisionHandler"></handler>
		<transition to="是否超过100万CNY" name="否"></transition>
		<transition to="股份公司总经理审批" name="是"></transition>
	</decision>


	<end-state name="审批通过"></end-state>

	<end-state name="结束（不通过）"></end-state>


</process-definition>