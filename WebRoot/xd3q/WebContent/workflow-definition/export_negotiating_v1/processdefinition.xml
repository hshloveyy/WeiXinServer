<?xml version="1.0" encoding="UTF-8"?>

<process-definition  xmlns=""  name="export_negotiating_v1">


	<start-state name="出口押汇申请">
		<transition to="部门经理确认"></transition>
	</start-state>


	<task-node name="部门经理确认">
	    <task name="部门经理确认"></task>
		<transition to="资金部经理审核" name="确认提交"></transition>
		<transition to="修改申请单" name="退回修改"></transition>
		<transition to="更新申请单状态为不通过" name="作废该申请"></transition>
	</task-node>

	<task-node name="资金部经理审核">
	    <task name="资金部经理审核"></task>
		<transition to="业务判断是否TT申请" name="同意"></transition>
		<transition to="修改申请单" name="退回修改"></transition>
		<transition to="更新申请单状态为不通过" name="不同意"></transition>
	</task-node>

	<decision name="业务判断是否TT申请">
		<handler config-type="bean" class="com.infolion.sapss.workflow.export.IfTTExportBillsDecisionHandler"></handler>
		<transition to="资金部人员确认" name="TT"></transition>
		<transition to="贸管审单员确认" name="非TT"></transition>
	</decision>

	<task-node name="资金部人员办理并填写实收金额及币别">
	    <task name="资金部人员办理并填写实收金额及币别"></task>
		<transition to="更新申请单状态为通过" name="办理完成并已填写相关信息"></transition>
	</task-node>

	<task-node name="贸管审单员办理并填写实收金额及币别">
	    <task name="贸管审单员办理并填写实收金额及币别"></task>
		<transition to="更新申请单状态为通过" name="办理完成并已填写相关信息"></transition>
	</task-node>

	<node name="更新申请单状态为通过">
		<action class="com.infolion.sapss.workflow.export.ExportBillsSucessfulActionHandler" config-type="bean"></action>
		<transition to="审批通过"></transition>
	</node>

	<node name="更新申请单状态为不通过">
		<action class="com.infolion.sapss.workflow.export.ExportBillsFailureActionHandler" config-type="bean"></action>
		<transition to="审批不通过"></transition>
	</node>

	<task-node name="修改申请单">
	    <task name="修改申请单"></task>
		<transition to="部门经理确认" name="提交部门经理"></transition>
	</task-node>

	<task-node name="机要室盖章">
	    <task name="机要室盖章"></task>
		<transition to="资金部人员办理并填写实收金额及币别" name="确认"></transition>
	</task-node>

	<task-node name="贸管审单员确认">
	    <task name="贸管审单员确认"></task>
		<transition to="机要室盖章1" name="提交机要室盖章"></transition>
		<transition to="修改申请单" name="退回修改"></transition>
	</task-node>

	<task-node name="资金部人员确认">
	    <task name="资金部人员确认"></task>
		<transition to="机要室盖章" name="提交机要室盖章"></transition>
	</task-node>

	<task-node name="机要室盖章1">
	    <task name="机要室盖章1"></task>
		<transition to="贸管审单员办理并填写实收金额及币别" name="确认"></transition>
	</task-node>


	<end-state name="审批不通过"></end-state>

	<end-state name="审批通过"></end-state>


</process-definition>