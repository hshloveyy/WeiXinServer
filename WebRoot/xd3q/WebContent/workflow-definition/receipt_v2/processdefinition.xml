<?xml version="1.0" encoding="UTF-8"?>

<process-definition  xmlns=""  name="receipt_v2">


	<start-state name="入仓申请">
		<transition to="部门经理确认"></transition>
	</start-state>


	<task-node name="综合部经理审核">
	    <task name="综合部经理审核"></task>
		<transition to="财务会计审核" name="同意入库"></transition>
		<transition to="业务确认" name="退回修改"></transition>
	</task-node>

	<task-node name="业务确认">
        <task name="业务确认"></task>
		<transition to="部门经理确认" name="提交部门经理审核"></transition>
		<transition to="更新入仓状态（不通过）" name="作废该申请"></transition>
	</task-node>

	<node name="更新入仓单状态">
		<action class="com.infolion.sapss.workflow.receipts.ProcessSucessfulActionHandler" config-type="bean"></action>
		<transition to="入仓申请通过"></transition>
	</node>

	<task-node name="综合部仓管员确认">
	    <task name="综合部仓管员确认"></task>
		<transition to="更新入仓单状态" name="单据相符，并且已录入SAP系统"></transition>
		<transition to="业务确认" name="退回修改"></transition>
	</task-node>

	<task-node name="部门经理确认">
	    <task name="部门经理确认"></task>
		<transition to="贸管专员审核" name="提交"></transition>
		<transition to="业务确认" name="退回修改"></transition>
	</task-node>

	<task-node name="财务会计审核">
	    <task name="财务会计审核"></task>
		<transition to="综合部仓管员确认" name="确认"></transition>
		<transition to="业务确认" name="退回修改"></transition>
		<transition to="综合部仓管员确认*" name="二次结算"></transition>
	</task-node>

	<node name="更新入仓状态（不通过）">
	    <action class="com.infolion.sapss.workflow.receipts.ProcessFaileActionHandler" config-type="bean"></action>
		<transition to="入仓申请不通过"></transition>
	</node>

	<task-node name="业务确认*">
	    <task name="业务确认*"></task>
		<transition to="部门经理确认*" name="二次结算确认提交"></transition>
		<transition to="部门经理确认**" name="二次结算确认提交*"></transition>
	</task-node>

	<task-node name="综合部经理审核*">
	    <task name="综合部经理审核*"></task>
		<transition to="财务会计审核*" name="同意入库"></transition>
		<transition to="业务确认*" name="退回修改"></transition>
	</task-node>

	<task-node name="财务会计审核*">
	    <task name="财务会计审核*"></task>
		<transition to="综合部仓管员确认" name="确认">
		   <action config-type="bean" class="com.infolion.sapss.workflow.receipts.ReceiptsTransitionActionHandler"></action>
		</transition>
		<transition to="业务确认*" name="退回修改"></transition>
	</task-node>

	<task-node name="部门经理确认*">
	    <task name="部门经理确认*"></task>
		<transition to="贸管专员审核*" name="确认"></transition>
		<transition to="业务确认*" name="退回修改"></transition>
	</task-node>

	<task-node name="部门经理确认**">
	    <task name="部门经理确认**"></task>
		<transition to="贸管专员审核**" name="确认"></transition>
		<transition to="业务确认*" name="退回修改"></transition>
	</task-node>

	<task-node name="综合部经理审核**">
	    <task name="综合部经理审核**"></task>
		<transition to="财务会计审核**" name="确认"></transition>
		<transition to="业务确认*" name="退回修改"></transition>
	</task-node>

	<task-node name="财务会计审核**">
	    <task name="财务会计审核**"></task>
		<transition to="业务确认*" name="确认"></transition>
		<transition to="业务确认*" name="退回修改"></transition>
	</task-node>

	<task-node name="综合部仓管员确认*">
	    <task name="综合部仓管员确认*"></task>
		<transition to="业务确认*" name="二次结算"><action config-type="bean" class="com.infolion.sapss.workflow.receipts.ReceiptsTransitionActionHandler"></action></transition>
	</task-node>

	<task-node name="贸管专员审核">
	    <task name="贸管专员审核"></task>
		<transition to="综合部经理审核" name="确认"></transition>
		<transition to="业务确认" name="退回修改"></transition>
	</task-node>

	<task-node name="贸管专员审核**">
	    <task name="贸管专员审核**"></task>
		<transition to="综合部经理审核**" name="确认"></transition>
		<transition to="业务确认*" name="退回修改"></transition>
	</task-node>

	<task-node name="贸管专员审核*">
	    <task name="贸管专员审核*"></task>
		<transition to="综合部经理审核*" name="确认"></transition>
		<transition to="业务确认*" name="退回修改"></transition>
	</task-node>


	<end-state name="入仓申请通过"></end-state>

	<end-state name="入仓申请不通过"></end-state>


</process-definition>