<?xml version="1.0" encoding="UTF-8"?>

<process-definition  xmlns=""  name="credit_application_v6">


	<start-state name="信用证开证申请">
		<transition to="部门经理确认"></transition>
	</start-state>


	<task-node name="填写开证申请表及预保">
	    <task name="填写开证申请表及预保"></task>
		<transition to="部门经理确认" name="提交部门经理"></transition>
	</task-node>

	<task-node name="香港财务会计审核">
	    <task name="香港财务会计审核"></task>
		<transition to="综合一部经理审核" name="提交综合一部经理审核"></transition>
		<transition to="填写开证申请表及预保" name="退回修改"></transition>
	</task-node>

	<task-node name="贸管审单员审核">
	    <task name="贸管审单员审核"></task>
		<transition to="贸管经理审核" name="提交贸管经理审核"></transition>
		<transition to="填写开证申请表及预保" name="退回修改"></transition>
	</task-node>

	<task-node name="贸管经理审核">
	    <task name="贸管经理审核"></task>
		<transition to="金额判断2" name="同意开证"></transition>
		<transition to="股份公司副总审批" name="提交股份公司副总审批"></transition>
		<transition to="贸管审单员审核" name="退回审单员修改"></transition>
	</task-node>

	<task-node name="股份公司副总审批">
	    <task name="股份公司副总审批"></task>
		<transition to="股份公司常务副总审批" name="提交股份公司常务副总审批"></transition>
		<transition to="填写开证申请表及预保" name="退回修改"></transition>
		<transition to="更新信用证状态为不通过" name="不批准"></transition>
	</task-node>

	<task-node name="股份公司常务副总审批">
	    <task name="股份公司常务副总审批"></task>
		<transition to="金额判断" name="同意"></transition>
		<transition to="填写开证申请表及预保" name="退回修改"></transition>
		<transition to="更新信用证状态为不通过" name="不批准"></transition>
	</task-node>

	<task-node name="股份公司总经理审批">
	    <task name="股份公司总经理审批"></task>
		<transition to="金额判断1" name="同意"></transition>
		<transition to="填写开证申请表及预保" name="退回修改"></transition>
		<transition to="更新信用证状态为不通过" name="不批准"></transition>
	</task-node>

	<task-node name="股份公司董事长审批">
	    <task name="股份公司董事长审批"></task>
		<transition to="综合部填写核销单" name="同意"></transition>
		<transition to="填写开证申请表及预保" name="退回修改"></transition>
		<transition to="更新信用证状态为不通过" name="不批准"></transition>
	</task-node>

	<decision name="金额判断">
		<handler config-type="bean" class="com.infolion.sapss.workflow.credit.Price1JudgeDecisionHandler"></handler>
		<transition to="综合部填写核销单" name="小于500万美金"></transition>
		<transition to="股份公司总经理审批" name="大于500万美金"></transition>
	</decision>

	<decision name="金额判断1">
		<handler config-type="bean" class="com.infolion.sapss.workflow.credit.Price2JudgeDecisionHandler"></handler>
		<transition to="综合部填写核销单" name="小于1000万美金"></transition>
		<transition to="股份公司董事长审批" name="大于1000万美金"></transition>
	</decision>

	<task-node name="综合部填写核销单">
	    <task name="综合部填写核销单"></task>
		<transition to="贸管回填信用证号和开证日期" name="核销单已填写"></transition>
	</task-node>

	<task-node name="部门经理确认">
	    <task name="部门经理确认"></task>
		<transition to="香港财务会计审核" name="确认提交"></transition>
		<transition to="填写开证申请表及预保" name="退回修改"></transition>
		<transition to="更新信用证状态为不通过" name="不通过"></transition>
	</task-node>

	<node name="更新信用证状态为不通过">
		<action class="com.infolion.sapss.workflow.credit.CreditEntryProcessFaileActionHandler" config-type="bean"></action>
		<transition to="信用证开证申请不通过"></transition>
	</node>

	<node name="更新订单状态为生效">
		<action class="com.infolion.sapss.workflow.credit.CreditEntryProcessSucessfulActionHandler" config-type="bean"></action>
		<transition to="信用证开证申请通过"></transition>
	</node>

	<task-node name="贸管回填信用证号和开证日期">
	    <task name="贸管回填信用证号和开证日期"></task>
		<transition to="更新订单状态为生效" name="信用证号，和开证日期已填写"></transition>
	</task-node>

	<decision name="金额判断2">
        <handler config-type="bean" class="com.infolion.sapss.workflow.credit.Price3JudgeDecisionHandler"></handler>
		<transition to="综合部填写核销单" name="小于200万USD或1400万CNY"></transition>
		<transition to="股份公司副总审批" name="大于200万USD或1400万CNY"></transition>
	</decision>

	<task-node name="综合一部经理审核">
	    <task name="综合一部经理审核"></task>
		<transition to="贸管审单员审核" name="提交股份贸管"></transition>
		<transition to="填写开证申请表及预保" name="退回修改"></transition>
	</task-node>


	<end-state name="信用证开证申请不通过"></end-state>

	<end-state name="信用证开证申请通过"></end-state>


</process-definition>