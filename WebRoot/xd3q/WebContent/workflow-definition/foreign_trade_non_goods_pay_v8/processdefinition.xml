<?xml version="1.0" encoding="UTF-8"?>

<process-definition  xmlns=""  name="foreign_trade_non_goods_pay_v8">


	<start-state name="外贸非货款申请">
		<transition to="关联交易判断" name="提交"></transition>
	</start-state>


	<task-node name="财务会计审核">
	    <task name="财务会计审核"></task>
		<transition to="财务经理审核" name="提交财务经理审核"></transition>
		<transition to="修改" name="退回修改"></transition>
	</task-node>

	<task-node name="财务经理审核">
	    <task name="财务经理审核"></task>
		<transition to="芜湖信达贸易总经理审核" name="同意付款"></transition>
		<transition to="修改" name="退回修改"></transition>
	</task-node>

	<task-node name="出纳审核">
	    <task name="出纳审核"></task>
		<transition to="财务经理确认付款" name="确认"></transition>
		<transition to="芜湖信达贸易总经理审核" name="退回确认"></transition>
	</task-node>

	<node name="更新状态">
		<action class="com.infolion.sapss.workflow.payment.ProcessSuccessActionHandler"></action>
		<transition to="审批通过"></transition>
	</node>

	<task-node name="修改">
	    <task name="修改"></task>
		<transition to="财务会计审核" name="提交"></transition>
		<transition to="更新状态为不通过" name="取消该申请"></transition>
	</task-node>

	<node name="更新状态为不通过">
		<action class="com.infolion.sapss.workflow.payment.ProcessFailureActionHandler"></action>
		<transition to="结束（不通过）"></transition>
	</node>

	<task-node name="芜湖信达贸易总经理审核">
	    <task name="芜湖信达贸易总经理审核"></task>
	    <transition to="资金部出纳审核" name="股份资金部出纳付款"></transition>
		<transition to="出纳审核" name="芜湖出纳付款"></transition>
		<transition to="修改" name="退回修改"></transition>
		<transition to="更新状态为不通过" name="不同意付款"></transition>
	</task-node>

	<task-node name="财务经理确认付款">
	    <task name="财务经理确认付款"></task>
		<transition to="更新状态" name="确认"></transition>
		<transition to="出纳审核" name="退回出纳">
			<action class="com.infolion.sapss.workflow.payment.CreditPayTellerCheckActionHandler" config-type="bean"></action>
		</transition>
	</task-node>

	<task-node name="资金部出纳审核">
	    <task name="资金部出纳审核"></task>
		<transition to="股份机要室审核" name="确认">
		  <action class="com.infolion.sapss.workflow.payment.CreditPayTellerCheckActionHandler" config-type="bean"></action>
		</transition>
		<transition to="芜湖信达贸易总经理审核" name="退回确认"></transition>
	</task-node>

	<task-node name="股份机要室审核">
	    <task name="股份机要室审核"></task>
		<transition to="更新状态" name="确认"></transition>
	</task-node>
	
	<decision name="关联交易判断">
	    <handler config-type="bean" class="com.infolion.sapss.workflow.payment.IsRelationDecisionHandler"></handler>
		<transition to="证券事业部审核" name="关联交易"></transition>
		<transition to="财务会计审核" name="非关联交易"></transition>
	</decision>

	<task-node name="证券事业部审核">
	    <task name="证券事业部审核"></task>
		<transition to="财务会计审核" name="确认"></transition>
		<transition to="修改" name="退回修改"></transition>
	</task-node>

	<end-state name="审批通过"></end-state>

	<end-state name="结束（不通过）"></end-state>


</process-definition>